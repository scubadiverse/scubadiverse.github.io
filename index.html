
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fish ID Game ‚Äì All 3 Levels</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      text-align: center;
      overflow: hidden;
      color: white;
    }
    video.bg-video {
      position: fixed;
      top: 0; left: 0;
      min-width: 100vw;
      min-height: 100vh;
      object-fit: cover;
      z-index: -2;
    }
    .overlay {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,50,0.4);
      z-index: -1;
    }
    .fish-img {
      width: 250px;
      border-radius: 10px;
      margin: 10px auto;
    }
    .choices {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }
    .choice {
      background: linear-gradient(to right, #8ec5fc, #e0c3fc);
      clip-path: polygon(0% 50%, 10% 0%, 80% 0%, 90% 25%, 100% 50%, 90% 75%, 80% 100%, 10% 100%, 0% 50%);
      border: none;
      color: #003049;
      font-size: 1em;
      padding: 12px 25px;
      font-weight: bold;
      box-shadow: 2px 4px 8px rgba(0,0,0,0.3);
    }
      padding: 10px 20px;
      border: 2px solid #fff;
      background-color: rgba(255,255,255,0.8);
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      color: #000;
    }
    .choice:hover {
      background-color: #d0f0ff;
    }
    .bubble {
      position: absolute;
      bottom: -50px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      animation: rise 10s infinite ease-in;
      z-index: 0;
    }
    @keyframes rise {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-100vh); opacity: 0; }
    }
  </style>

<audio id="correctSound">
  <source src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" type="audio/ogg">
</audio>
<audio id="wrongSound">
  <source src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" type="audio/ogg">
</audio>
</head>
<body>
  <video class="bg-video" autoplay muted loop>
    <source src="https://cdn.pixabay.com/video/2023/08/09/179553-853623618_large.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>
  <audio id="oceanSound" autoplay loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2e84f6d176.mp3?filename=ocean-waves-soft-ambient-113797.mp3" type="audio/mpeg">
  </audio>

  <h1>üê† Welcome to the Canary Islands MArine Life Quiz! üêü</h1>
  <p id="instruction">Observe these fish and remember their names...</p>

  <div id="game">
    <div id="introPhase">
      <img id="introFishImg" class="fish-img" />
      <p id="introFishName"></p>
      <button id="nextIntroBtn" onclick="showNextIntro()">Keep diving</button>
    </div>

    <div id="quiz" style="display:none;">
      <img id="quizFishImg" class="fish-img" />
      <div class="choices" id="choices"></div>
      <p id="result"></p>
    </div>
  </div>

  <script>
    const allFishLevels = [
      [ // Level 1
        { name: "Cuttle Fish", image: "https://underwatertenerife.com/wp-content/uploads/2024/12/whatsapp-image-2024-12-11-at-01.02.50.jpeg" },
        { name: "Common Stingray", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/whatsapp-image-2024-12-11-at-01.40.13-4-1.jpeg" },
        { name: "Butterfly Ray", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/whatsapp-image-2025-04-10-at-22.48.48.jpeg" },
        { name: "Angel Shark", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/whatsapp-image-2024-12-10-at-23.15.32.jpeg" },
        { name: "Flying Gurnard", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/5e5c638c-11eb-4591-a656-5530611452ef-2.jpg" }
      ],
      [ // Level 2
        { name: "Nudibranch", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/whatsapp-image-2025-04-08-at-21.02.09-edited.jpeg" },
        { name: "Sea Horse", image: "https://underwatertenerife.com/wp-content/uploads/2024/12/whatsapp-image-2024-12-11-at-01.40.13-1.jpeg" },
        { name: "Green Sea Turtle", image: "https://underwatertenerife.com/wp-content/uploads/2024/12/whatsapp-image-2024-12-11-at-01.25.30.jpeg" },
        { name: "Trumpet Fish", image: "https://underwatertenerife.com/wp-content/uploads/2024/12/whatsapp-image-2024-12-10-at-23.19.01-1.jpeg" },
        { name: "Lizard Fish", image: "https://underwatertenerife.com/wp-content/uploads/2024/12/whatsapp-image-2024-12-11-at-00.02.30-1.jpeg" },
        { name: "Parrot Fish", image: "https://underwatertenerife.com/wp-content/uploads/2024/12/whatsapp-image-2024-12-10-at-23.19.02-5.jpeg" },
        { name: "Pandora Fish", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/img_5901.jpeg" }
      ],
      [ // Level 3
        { name: "Damsel Fish", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/img_5898.jpeg" },
        { name: "Yellow Sea Bream", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/whatsapp-image-2025-04-19-at-21.39.20.jpeg" },
        { name: "White Sea Bream", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/whatsapp-image-2025-04-19-at-21.30.23.jpeg" },
        { name: "Barracudas", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/whatsapp-image-2025-04-19-at-21.39.21.jpeg" },
        { name: "Rock Fish", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/whatsapp-image-2025-04-19-at-21.30.24.jpeg" },
        { name: "Flounder", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/whatsapp-image-2024-12-10-at-23.19.03.jpeg" },
        { name: "Ornate Wrasse", image: "https://underwatertenerife.com/wp-content/uploads/2024/10/whatsapp-image-2024-10-18-at-23.14.52.jpeg" },
        { name: "Bull Ray", image: "https://underwatertenerife.com/wp-content/uploads/2025/04/whatsapp-image-2025-04-10-at-22.48.49-1.jpeg" }
      ]
    ];
  
let level = 0;
let fishSet = allFishLevels[level];
let introIndex = 0;
let quizIndex = 0;
let score = 0;
let attempt = 0;

document.addEventListener("DOMContentLoaded", () => {
  showNextIntro();
});

function showNextIntro() {
  if (introIndex < fishSet.length) {
    document.getElementById("introFishImg").src = fishSet[introIndex].image;
    document.getElementById("introFishName").innerText = "This is a " + fishSet[introIndex].name;
    introIndex++;
    if (introIndex === fishSet.length) {
      document.getElementById("nextIntroBtn").innerText = "Start Quiz";
    }
  } else {
    startQuiz();
  }
}

function startQuiz() {
  document.getElementById("introPhase").style.display = "none";
  document.getElementById("quiz").style.display = "block";
  quizIndex = 0;
  attempt = 0;
  loadQuizFish();
}

function loadQuizFish() {
  attempt = 0;
  document.getElementById("quizFishImg").src = fishSet[quizIndex].image;
  const options = shuffle([...fishSet.map(f => f.name)]);
  const container = document.getElementById("choices");
  container.innerHTML = "";
  options.forEach(option => {
    const btn = document.createElement("button");
    btn.className = "choice";
    btn.innerText = option;
    btn.onclick = () => checkAnswer(option);
    container.appendChild(btn);
  });
}

function checkAnswer(answer) {
  const result = document.getElementById("result");
  const correctSound = document.getElementById("correctSound");
  const wrongSound = document.getElementById("wrongSound");
  if (answer === fishSet[quizIndex].name) {
    if (attempt === 0) score += 1;
    else if (attempt === 1) score += 0.5;
    else if (attempt === 2) score += 0.25;
    correctSound.play();
    result.innerHTML = "‚úÖ Correct!";
    quizIndex++;
    if (quizIndex < fishSet.length) {
      setTimeout(() => {
        result.innerHTML = "";
        loadQuizFish();
      }, 1000);
    } else {
      nextLevel();
    }
  } else {
    attempt++;
    wrongSound.play();
    result.innerHTML = "‚ùå Try again!";
    if (attempt >= 3) {
      quizIndex++;
      attempt = 0;
      setTimeout(() => {
        result.innerHTML = "";
        if (quizIndex < fishSet.length) loadQuizFish();
        else nextLevel();
      }, 1000);
    }
  }
}


function nextLevel() {
  level++;
  if (level < allFishLevels.length) {
    fishSet = allFishLevels[level];
    introIndex = 0;
    quizIndex = 0;
    document.getElementById("introFishImg").src = "";
    document.getElementById("introFishName").innerText = "";
    document.getElementById("nextIntroBtn").innerText = "Keep Diving";
    document.getElementById("introPhase").style.display = "block";
    document.getElementById("quiz").style.display = "none";
    document.getElementById("instruction").innerText = "New Level! Observe these fish...";
  } else {
    let total = allFishLevels.flat().length;
    if (score === total) {
      showBonus();
    } else {
      document.getElementById("game").innerHTML = `
        <h2>‚ú® You scored ${score} out of ${total}</h2>
        <p>Can you do better next time?</p>
        <button onclick="location.reload()">üîÅ Retry</button>`;
    }
  }
}


function showBonus() {
  document.getElementById("game").innerHTML = `
    <h2>üéâ You finished the game!</h2>
    <p>You scored <strong>${score}</strong> points</p>
    <h3>üéÅ Bonus Challenge üéÅ</h3>
    <p>What is this?</p>
    <img src="https://underwatertenerife.com/wp-content/uploads/2025/04/whatsapp-image-2025-04-19-at-21.37.55-1.jpeg" alt="Bonus Jellyfish" class="fish-img" />
    <div class="choices">
      <button onclick="checkBonus('Sea Salp')">Sea Salp</button>
      <button onclick="checkBonus('Nudibranch')">Nudibranch</button>
      <button onclick="checkBonus('Jellyfish')">Jellyfish</button>
    </div>
    <p id="bonusResult"></p>
    <br><button onclick="location.reload()">üîÅ Try Again</button>`;
}

function checkBonus(answer) {
  const bonusResult = document.getElementById("bonusResult");
  if (answer === "Jellyfish") {
    bonusResult.innerHTML = "‚úÖ Correct! This is <strong>Pelagia Noctiluca</strong> ‚ú®";
  } else {
    bonusResult.innerHTML = "‚ùå Nope! Try again.";
  }
}

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}
</script>

<div class="bubbles-bg" id="bubble-container"></div>
<script>
  const bubbleContainer = document.getElementById('bubble-container');
  for (let i = 0; i < 40; i++) {
    const bubble = document.createElement('div');
    bubble.className = 'bubble';
    bubble.style.left = Math.random() * 100 + 'vw';
    const size = Math.random() * 20 + 10;
    bubble.style.width = size + 'px';
    bubble.style.height = size + 'px';
    bubble.style.animationDuration = (Math.random() * 8 + 4) + 's';
    bubbleContainer.appendChild(bubble);
  }
</script>
</body>
</html>
